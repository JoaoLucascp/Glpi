â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                               â•‘
â•‘  ğŸ”´ ERRO CRÃTICO IDENTIFICADO: BOM (Byte Order Mark)                          â•‘
â•‘                                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  âŒ ERRO FATAL:                                                               â•‘
â•‘  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â•‘
â•‘                                                                               â•‘
â•‘  Fatal error: strict_types declaration must be the very first                 â•‘
â•‘  statement in the script in src\Config.php on line 3                          â•‘
â•‘                                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  ğŸ” CAUSA DO PROBLEMA:                                                        â•‘
â•‘  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â•‘
â•‘                                                                               â•‘
â•‘  Todos os arquivos em src/ foram salvos com BOM UTF-8 (EF BB BF).            â•‘
â•‘                                                                               â•‘
â•‘  O BOM Ã© um caractere invisÃ­vel no inÃ­cio do arquivo que faz o PHP           â•‘
â•‘  interpretar que hÃ¡ conteÃºdo antes do declare(strict_types=1).               â•‘
â•‘                                                                               â•‘
â•‘  Exemplo do que o PHP "vÃª":                                                   â•‘
â•‘  ï»¿<?php                    â† BOM estÃ¡ aqui (invisÃ­vel)                        â•‘
â•‘  declare(strict_types=1);  â† PHP acha que isto nÃ£o Ã© a 1Âª linha              â•‘
â•‘                                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  âœ… SOLUÃ‡ÃƒO AUTOMÃTICA CRIADA:                                                â•‘
â•‘  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â•‘
â•‘                                                                               â•‘
â•‘  Criei um script que remove o BOM de TODOS os arquivos PHP automaticamente.  â•‘
â•‘                                                                               â•‘
â•‘  Arquivos criados:                                                            â•‘
â•‘  1. REMOVER_BOM.ps1                â† Script PowerShell                        â•‘
â•‘  2. CORRECAO_BOM_MANUAL.md         â† Guia completo (este arquivo)            â•‘
â•‘                                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  ğŸš€ COMO EXECUTAR (3 PASSOS):                                                 â•‘
â•‘  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â•‘
â•‘                                                                               â•‘
â•‘  PASSO 1: EXECUTAR SCRIPT                                                     â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â•‘                                                                          â•‘
â•‘  OpÃ§Ã£o B (PowerShell):                                                        â•‘
â•‘  1. Clique direito em: REMOVER_BOM.ps1                                        â•‘
â•‘  2. "Executar com PowerShell"                                                 â•‘
â•‘  3. Aguarde a conclusÃ£o                                                       â•‘
â•‘                                                                               â•‘
â•‘  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â•‘
â•‘                                                                               â•‘
â•‘  PASSO 2: TESTAR O AUTOLOADER                                                 â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â•‘
â•‘                                                                               â•‘
â•‘  Abra o PowerShell ou CMD e execute:                                          â•‘
â•‘                                                                               â•‘
â•‘  cd D:\laragon\www\glpi\plugins\newbase                                      â•‘
â•‘  php -r "require 'vendor/autoload.php'; var_dump(class_exists('GlpiPlugin\Newbase\Config'));"  â•‘
â•‘                                                                               â•‘
â•‘  âœ… Resultado esperado: bool(true)                                            â•‘
â•‘  âŒ Se der erro: Me avise!                                                    â•‘
â•‘                                                                               â•‘
â•‘  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â•‘
â•‘                                                                               â•‘
â•‘  PASSO 3: REINSTALAR PLUGIN NO GLPI                                           â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                            â•‘
â•‘                                                                               â•‘
â•‘  1. Acesse: http://localhost/glpi                                             â•‘
â•‘  2. Login: glpi / glpi                                                        â•‘
â•‘  3. Configurar > Plugins                                                      â•‘
â•‘  4. Localize: Newbase                                                         â•‘
â•‘  5. Clique: Instalar                                                          â•‘
â•‘  6. Clique: Ativar                                                            â•‘
â•‘                                                                               â•‘
â•‘  7. Teste: http://localhost/glpi/plugins/newbase/front/config.php            â•‘
â•‘                                                                               â•‘
â•‘  âœ… Deve carregar sem erros!                                                  â•‘
â•‘                                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  ğŸ“‹ O QUE O SCRIPT FAZ:                                                       â•‘
â•‘  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â•‘
â•‘                                                                               â•‘
â•‘  1. Verifica TODOS os arquivos PHP em:                                        â•‘
â•‘     â€¢ src/                                                                    â•‘
â•‘     â€¢ src/Ajax/                                                               â•‘
â•‘     â€¢ front/                                                                  â•‘
â•‘     â€¢ ajax/                                                                   â•‘
â•‘     â€¢ inc/                                                                    â•‘
â•‘     â€¢ setup.php                                                               â•‘
â•‘     â€¢ hook.php                                                                â•‘
â•‘                                                                               â•‘
â•‘  2. Detecta se hÃ¡ BOM UTF-8 (bytes: EF BB BF)                                 â•‘
â•‘                                                                               â•‘
â•‘  3. Remove o BOM mantendo todo o resto do arquivo intacto                     â•‘
â•‘                                                                               â•‘
â•‘  4. Gera relatÃ³rio mostrando:                                                 â•‘
â•‘     â€¢ Arquivos verificados                                                    â•‘
â•‘     â€¢ Arquivos com BOM encontrados                                            â•‘
â•‘     â€¢ Arquivos corrigidos                                                     â•‘
â•‘                                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  âš™ï¸ DETALHES TÃ‰CNICOS:                                                        â•‘
â•‘  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â•‘
â•‘                                                                               â•‘
â•‘  O que Ã© BOM?                                                                 â•‘
â•‘  â€¢ Byte Order Mark (EF BB BF em UTF-8)                                        â•‘
â•‘  â€¢ Caractere invisÃ­vel no inÃ­cio de arquivos UTF-8                            â•‘
â•‘  â€¢ Usado por alguns editores (como Notepad) para identificar encoding        â•‘
â•‘  â€¢ PHP interpreta como conteÃºdo, causando erro                                â•‘
â•‘                                                                               â•‘
â•‘  Por que causa erro no PHP?                                                   â•‘
â•‘  â€¢ declare(strict_types=1) DEVE ser a primeira declaraÃ§Ã£o                    â•‘
â•‘  â€¢ BOM vem antes de <?php, entÃ£o PHP acha que declare nÃ£o Ã© a 1Âª             â•‘
â•‘  â€¢ Resulta em: Fatal error                                                    â•‘
â•‘                                                                               â•‘
â•‘  Como o script resolve?                                                       â•‘
â•‘  â€¢ LÃª arquivo como bytes                                                      â•‘
â•‘  â€¢ Verifica primeiros 3 bytes (EF BB BF)                                      â•‘
â•‘  â€¢ Remove esses 3 bytes                                                       â•‘
â•‘  â€¢ Salva arquivo sem BOM                                                      â•‘
â•‘                                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  ğŸ¯ RESULTADO ESPERADO:                                                       â•‘
â•‘  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â•‘
â•‘                                                                               â•‘
â•‘  ANTES DA CORREÃ‡ÃƒO:                                                           â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â•‘
â•‘  âŒ Fatal error: strict_types declaration must be...                          â•‘
â•‘  âŒ Plugin nÃ£o instala no GLPI                                                â•‘
â•‘  âŒ Autoloader nÃ£o funciona                                                   â•‘
â•‘  âŒ class_exists() retorna false                                              â•‘
â•‘                                                                               â•‘
â•‘  DEPOIS DA CORREÃ‡ÃƒO:                                                          â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â•‘
â•‘  âœ… Nenhum erro ao carregar classes                                           â•‘
â•‘  âœ… Plugin instala normalmente no GLPI                                        â•‘
â•‘  âœ… Autoloader funciona perfeitamente                                         â•‘
â•‘  âœ… class_exists('GlpiPlugin\Newbase\Config') retorna true                    â•‘
â•‘  âœ… Todas as pÃ¡ginas carregam sem erros                                       â•‘
â•‘                                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  âš ï¸ IMPORTANTE:                                                               â•‘
â•‘  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â•‘
â•‘                                                                               â•‘
â•‘  ApÃ³s remover o BOM, EVITE editar os arquivos com:                            â•‘
â•‘  â€¢ Windows Notepad (sempre adiciona BOM)                                      â•‘
â•‘  â€¢ Alguns editores mal configurados                                           â•‘
â•‘                                                                               â•‘
â•‘  USE SEMPRE:                                                                  â•‘
â•‘  â€¢ VS Code (configure para "UTF-8 sem BOM")                                   â•‘
â•‘  â€¢ PhpStorm                                                                   â•‘
â•‘  â€¢ Sublime Text                                                               â•‘
â•‘  â€¢ Notepad++ (configure encoding para "UTF-8 sem BOM")                        â•‘
â•‘                                                                               â•‘
â•‘  NO VS CODE:                                                                  â•‘
â•‘  1. Abra o arquivo                                                            â•‘
â•‘  2. Canto inferior direito: clique em "UTF-8"                                 â•‘
â•‘  3. Selecione: "Save with Encoding"                                           â•‘
â•‘  4. Escolha: "UTF-8"                                                          â•‘
â•‘                                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  ğŸ“Š CHECKLIST DE EXECUÃ‡ÃƒO:                                                    â•‘
â•‘  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â•‘
â•‘                                                                               â•‘
â•‘  [ ] Duplo clique em EXECUTAR_REMOVER_BOM.bat                                 â•‘
â•‘  [ ] Vi a mensagem "BOM removido de X arquivo(s)"                             â•‘
â•‘  [ ] Testei o autoloader (php -r "...")                                       â•‘
â•‘  [ ] Resultado: bool(true)                                                    â•‘
â•‘  [ ] Acessei http://localhost/glpi                                            â•‘
â•‘  [ ] Instalei o plugin Newbase                                                â•‘
â•‘  [ ] Ativei o plugin Newbase                                                  â•‘
â•‘  [ ] Testei: /plugins/newbase/front/config.php                                â•‘
â•‘  [ ] PÃ¡gina carrega sem erros                                                 â•‘
â•‘  [ ] âœ… TUDO FUNCIONANDO!                                                     â•‘
â•‘                                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  ğŸ†˜ SE AINDA HOUVER ERROS:                                                    â•‘
â•‘  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â•‘
â•‘                                                                               â•‘
â•‘  Me envie:                                                                    â•‘
â•‘  1. Output completo do script REMOVER_BOM.ps1                                 â•‘
â•‘  2. Resultado do comando: php -r "require..."                                 â•‘
â•‘  3. Print da tela do erro (se houver)                                         â•‘
â•‘  4. Primeiras 5 linhas de: src/Config.php                                     â•‘
â•‘                                                                               â•‘
â•‘  Comando para ver as primeiras linhas:                                        â•‘
â•‘  Get-Content D:\laragon\www\glpi\plugins\newbase\src\Config.php -Head 5 | Format-Hex  â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

              ğŸš€ EXECUTE AGORA: EXECUTAR_REMOVER_BOM.bat

    Duplo clique no arquivo e aguarde a mensagem de sucesso!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
